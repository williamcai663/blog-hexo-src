---
title: CAP理论的理解
date: 2022-10-23 07:19:56
tags: CAP
---
- CAP的定义

   CAP（Consistency、Availability、Partition Tolerance Theorem）定理里描述了一个分布式的系统中，涉及共享数据问题时，以下三个特性最多只能同时满足其中两个（CP，AP，CA）。其中P最难理解，解释如下。

- P(分区容错性)理解


   一个分布式系统里面，节点组成的网络本来应该就是连通的，然而可能因为一些故障，使得有些节点之间不连通了，整个网络就分成了几块区域。数据就散布在这些不连通的区域中，这叫分区。当你一个数据项只在一个节点中保存，那么分区出现后，与这个节点不连通的部分就访问不到这个数据了，这时分区就是无法容忍的。提高分区容忍度性的办法就是一个数据项复制到多个节点上，那么出现分区之后，这一数据项就可能分布到各个区里，容忍性就提高了。然而，要把数据复制到多个节点，就会带来一致性问题，就是多个节点上面的数据可能是不一致的。要保证一致，每次写操作就都要等待全部节点写成功，而等待又会带来可用性的问题。总的来说就是，数据存在的节点越多，分区容忍性越高，但要复制更新的数据就越多，一致性就越难保证。为了保证一致性，更新所有节点数据所需要的时间就越长，可用性就会降低。

